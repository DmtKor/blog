Проект "Блог"

* Структура проекта *
 
 main.go
 src -- managedb 
      \- handlers 
       \- middleware 
        \- commander 


*  ManageDB (Модель данных) *

Записи хранятся в БД.
Доступ к данным через структуру с методами.
Весь функционал в пакете managedb.

Структуры Go:

Post {
    Id uint64          - номер
    Title string       - заголовок
    Description string - описание
    Content string     - содержимое
    PostDate time      - время публикации
    Tags []string      - теги
}
Comment {
    Id uint64      - id комментария
    PostId uint32  - id поста
    Author string  - Автор
    Content string - Текст
    CommDate time  - Время публикации
    Email string   - Почта
}

Таблицы PostgreSQL: см. файл. 


* Handlers (API) *

GET /, /about - статическая страница со ссылками
GET /browse?[page=]&[pagesize=] - получить страницу page размера pagesize постов (по умолч. 1 и 10 соотв-но)
GET /doc?id= - получить пост по ID, теги и комментарии (без id - ошибка)
POST /doc - API создания поста, возвращает на страницу нового поста (форма создания на странице about для простоты)
DELETE /doc?id=.. - API удаления поста по ID, возвращает на /about
POST /comment?postid=.. - отправка комментария к посту с ID. возвращает ошибку или на страницу поста
DELETE /comment?postid=...&commid=.. - удаление комментария к посту по ID комментария

Позже нужна авторизация
Все возвращается в HTML (если не будет фронтенда)

Маршрутизация ерез chi. Хендлеры в отдельном пакете handlers. 
Если будет возможность сделать фронтенд, отправку статических файлов и динамического контента можно разделить.


* Middleware *

Логирование всех запросов через отправку в commander. 
Проверка, не завершается ли работа сервера.


* Сommander *

Есть структура commander. В ней канал ввода из CLI, канал ошибок и объекты/данные сервера. 
Запускается горутина, которая прослушивает каналы и совершает действия, адекватные ситуации.
Есть методы: initServer (инициализация сервера, маршрутов, БД...)
             shutdownServer (дождаться завершения обработчиков запросов, завершить рутину, ожидающую новых запросов,
                             вызвать метод закрытия БД...)

Чтобы прервать все процессы, делается следующее: горутина, прослушивающая соединения, продолжает работать. Однако в 
middleware, который, осуществляет проверку работы сервера, изменяется значение, из-за чего он перенаправляет все за-
просы в один хендлер, который никак не учитывается при проверке завершения всех целевых горутин, он возвращает ошибку.
Все остальные процессы добавляют значение в WaitGroup, определенный в commander и сигнализируют о своем завершении для
этого объекта. Также при завершении работы сервера должно быть закрыто подключение к БД (уже после прекращения 
стандартной обработки соединения). После этого программа завершается.
